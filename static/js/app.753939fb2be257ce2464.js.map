{"version":3,"sources":["webpack:///./src/components/Modules/memory.js","webpack:///./src/components/Modules/cpu.js","webpack:///./src/components/Modules/gpu.js","webpack:///./src/components/Modules/audio.js","webpack:///./src/components/Modules/chip8.js","webpack:///src/components/internalDebugger.vue","webpack:///./src/components/internalDebugger.vue?412d","webpack:///./src/components/internalDebugger.vue","webpack:///src/components/Chip8Debug.vue","webpack:///./src/components/Chip8Debug.vue?4608","webpack:///./src/components/Chip8Debug.vue","webpack:///src/App.vue","webpack:///./src/App.vue?cf0e","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/Modules/hexData.js","webpack:///./src/components/Modules/fileLoader.js","webpack:///./src/components/Modules/opcodeDecoder.js"],"names":["Modules_memory","memory","classCallCheck_default","this","RAM","Uint8Array","ramSize","clearMemory","i","length","address","bytes","subarray","value","arr","offset","set","Modules_cpu","cpu","reset","V","I","Uint16Array","PC","SP","stack","Error","val","options","setMemorySize","loadFromMem","storeToMem","DMA","Modules_gpu","gpu","blankColor","fillColor","width","height","canvas","Math","ceil","oldTime","xsize","ysize","vram","Uint8ClampedArray","clearRam","ctx","getContext","_layerOne","createImageData","clearScreen","x","y","spriteArray","collision","startIndex","row","j","pixel","screenIndex","data","timestamp","fps","copyVramToImage","promise_default","a","all","createImageBitmap","resizeQuality","colorSpaceConversion","premultiplyAlpha","resizeWidth","resizeHeight","then","bitmaps","drawImage","requestAnimationFrame","render","bind","R","G","B","layerData","arguments","undefined","index","Modules_audio","audio","DELAY","SOUND","audioCtx","window","AudioContext","webkitAudioContext","vol","frequency","oscillator","createOscillator","gainNode","createGain","type","start","gain","connect","destination","clockingInterval","timer","clearInterval","setInterval","updateAudio","Modules_chip8","chip8","IO","0","1","2","3","4","5","6","7","8","9","A","C","D","E","F","map","canvasEl","setCanvas","configure","initCPU","initGPU","initAudio","initRAM","flushRegisters","startGPU","startAudio","restartFlag","restartCPU","restartGPU","restartAudio","hexData","startAudioLoop","w","h","adjustWindowSize","startCPUProgramOn","clock","debug","updateDebuggerOneTick","stopClock","processOneCycle","stopSignal","configClock","resumeClock","tickOneClockCycle","upper","lower","opcode","opcodeHexStr","Number","toString","padStart","currentOpcode","processOpcode","opcodeDesc","popStack","_nnn","nnn","desc","_nnn2","_nnn3","pushStack","_xkk","xkk","kk","_xkk2","_xy","xy","_xkk3","_xkk4","_xy2","key","_xy3","_nnn4","_nnn5","_xkk5","randomByte","floor","random","_xyn","xyn","n","xPos","yPos","getMemoryChunk","drawSprite","_xkk6","_xkk7","console","log","waitForKeyFlag","waitForKeyReg","regIndex","byteData","reg1","reg2","addr","nibble","STACK","internalDebugger","name","props","Object","default","commandHistory","Array","components_internalDebugger","_vm","_h","$createElement","_c","_self","attrs","id","_l","command","staticClass","for","_v","_s","_m","staticRenderFns","Chip8Debug","components","chip8Debugger","__webpack_require__","normalizeComponent","ssrContext","canvasScale","screenX","screenY","gameSpeed","地图","q","e","r","s","d","f","z","c","v","chip8OpcodeHistory","chip8InternalDebugData","mounted","getCPUDebugParameters","document","getElementById","configureGPU","configureCPU","clockSpeed","configureAudio","initSystem","onkeydown","processInputFromKeyboardKeyDown","onkeyup","processInputFromKeyboardKeyUp","onresize","processWindowAdjust","loadROM","methods","_this","currentROM","fileLoader_default","restartSystem","loadProgramIntoRam","clearDebugInfo","startEmulation","oneCycle","restartEmulation","alert","stopEmulation","keyPressedFlag","钥匙","target","btn","keyPressed","processInput","press","waitForKeyCallback","pop","unshift","processGameSpeedAdjust","minWin","innerWidth","canvasWidth","canvasHeight","onWindowResize","components_Chip8Debug","on","change","directives","rawName","expression","domProps","__r","$event","click","App","Chip8Debug_normalizeComponent","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","Vue","config","productionTip","use","less","el","template","module","exports","10","11","12","13","14","15","fileLoader","callback","file","myRequest","Request","method","headers","Content-Type","mode","cache","reader","program","fetch","res","body","getReader","read","processText","_ref","array1","array2","result","done","catch","isHexString","string","match","isChip8Register","opcodeDecoder","parse","tokens","byteCode","toUpperCase","slice","charAt","tokenToOp","replace","trim","split"],"mappings":"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","file":"static/js/app.753939fb2be257ce2464.js","sourcesContent":["\n\nclass memory {\n  constructor(){\n    this.RAM = new Uint8Array(4096)\n    \n  }\n  setMemorySize(ramSize){\n    this.RAM = new Uint8Array(ramSize)\n    this.clearMemory()\n  }\n\n  clearMemory(){\n    for (let i = 0; i < this.RAM.length; i++){\n      this.RAM[i] = 0x00\n    }\n  }\n  getMemoryChunk(address, bytes){\n    return this.RAM.subarray(address, address + bytes)\n  }\n  loadFromMem(address){\n    return this.RAM[address]\n  }\n\n  storeToMem(address, value){\n    this.RAM[address] = value\n  }\n\n  DMA(arr, offset){\n    this.RAM.set(arr, offset)\n  }\n\n}\n\nexport default new memory()\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Modules/memory.js","import memory from './memory.js'\nimport opcodeDecoder from './opcodeDecoder.js'\n\nclass cpu {\n\n  constructor(){\n    this.RAM = memory\n\n    this.reset()\n  }\n\n  reset(){\n    // 16 8-bit registers\n    this.V = new Uint8Array(16)\n\n    this.I = new Uint16Array(1)\n\n    this.PC = new Uint16Array(1)\n    this.SP = new Uint8Array(1)\n    this.stack = new Uint16Array(16)\r\n\n  }\r\n  popStack(){\n    if (this.SP[0] <= 0){\n      return Error('cannot pop stack with no elements')\n    }\n    this.SP[0]--\n    return this.stack[this.SP[0]]\n  }\n  pushStack(val){\n    if (this.SP[0] >= this.stack.length - 1){\n      return Error('cannot push stack with full stack')\n    }\n    this.stack[this.SP[0]] = val & 0xFFFF\n    this.SP[0]++\n  }\n\n  startCPUProgramOn(address){\r\n    this.PC[0] = address\r\n    this.SP[0] = 0\r\n  }\r\n\n  configure(options){\n    this.RAM.setMemorySize(options.ramSize)\n  }\n\n  flushRegisters(){\n    for (let i = 0; i < this.V.length; i++){\n      this.V[i] = 0x00\n    }\n    this.I = 0x0000\n    // this.DELAY = 0x00\n    // this.SOUND = 0x00\n    this.PC = 0x0000 // ?? 入口在哪？\n    this.SP = 0x00\n  }\n\r\n  loadFromMem(address){\n    return this.RAM.loadFromMem(address)\n  }\n\n  storeToMem(address, value){\n    this.RAM.storeToMem(address, value)\n  }\n\n  DMA(arr, offset){\n    this.RAM.DMA(arr, offset)\n  }\n\n\n}\n\n\nexport default new cpu()\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Modules/cpu.js","class gpu {\n\n  adjustWindowSize(width, height){\n    this.canvas.width = Math.ceil(width)\n    this.canvas.height = Math.ceil(height)\n  }\n\n  constructor(){\n    this.blankColor = [0, 0, 0, 255]\n    this.fillColor = [0, 255, 0, 255]\n\n  }\n\n  setCanvas(canvas){\n    this.canvas = canvas\n  }\n  configure(options){\n    // this.canvas.width = Math.ceil(options.canvasWidth)\n    // this.canvas.height = Math.ceil(options.canvasHeight)\n\n    this.oldTime = 0\n    this.xsize = options.xsize //size is in absolute pixels\n    this.ysize = options.ysize\n    this.vram = new Uint8ClampedArray(this.xsize * this.ysize) // Just the monochrome data of the vram\n    this.clearRam = new Uint8ClampedArray(this.xsize * this.ysize)\n    // this.vramSize = this.xsize * this.ysize * 4\n    // console.log(this.vramSize)\n\n    this.ctx = this.canvas.getContext('2d')\n    // this.ctx.globalCompositeOperation = 'sourcein';\n    this._layerOne = this.ctx.createImageData(this.xsize, this.ysize)\n    this.clearScreen()\n\n  }\n\n  // spriteArray\n  drawSprite(x, y, spriteArray){\n    let collision = 0\n    let startIndex = this.xsize * y\n\n    for (let i = 0; i < spriteArray.length; i++){\n      let row = spriteArray[i]\n      for (let j = 0; j < 8; j++){\n        let pixel = ((row >> (7-j)) & 0b1)\n        let screenIndex = startIndex +  ((x + j) % this.xsize)\n        // let screenIndex = (x + j) % this.xsize + this.xsize * (y + i)\n\n        if (collision === 0 && (this.vram[screenIndex] & pixel)){\n          collision = 1\n        }\n        this.vram[screenIndex] ^= pixel\n\n      }\n      startIndex += this.xsize\n      // this.vram[(x + 0) % this.xsize + this.xsize * (y + i)] ^= ((row >> 7) & 0b1)\n      // this.vram[(x + 1) % this.xsize + this.xsize * (y + i)] ^= ((row >> 6) & 0b1)\n      // this.vram[(x + 2) % this.xsize + this.xsize * (y + i)] ^= ((row >> 5) & 0b1)\n      // this.vram[(x + 3) % this.xsize + this.xsize * (y + i)] ^= ((row >> 4) & 0b1)\n      // this.vram[(x + 4) % this.xsize + this.xsize * (y + i)] ^= ((row >> 3) & 0b1)\n      // this.vram[(x + 5) % this.xsize + this.xsize * (y + i)] ^= ((row >> 2) & 0b1)\n      // this.vram[(x + 6) % this.xsize + this.xsize * (y + i)] ^= ((row >> 1) & 0b1)\n      // this.vram[(x + 7) % this.xsize + this.xsize * (y + i)] ^= ((row >> 0) & 0b1)\n    }\n    return collision\n  }\n\n  // vram binary data (monochrome) to image\n  copyVramToImage(){\n\n    for (let i = 0; i < this.vram.length; i++){\n      if (this.vram[i] === 0){\n        this._layerOne.data.set(this.blankColor, i << 2)\n      } else {\n        this._layerOne.data.set(this.fillColor, i << 2)\n      }\n    }\n\n\n  }\n\n\n  clearScreen(){\n    this.vram.set(this.clearRam)\n    // this.copyVramToImage()\n  }\n\n  // this._layerOne (a VRAM) -->  bitmap --> renderedImage\n  render(timestamp){\n    // for (let i = 0; i < this.vramSize; i += 4){\n    //   this._layerOne.data[i + 0] = this.vram[i + 0]\n    //   this._layerOne.data[i + 1] = this.vram[i + 1]\n    //   this._layerOne.data[i + 2] = this.vram[i + 2]\n    //   this._layerOne.data[i + 3] = 255\n    // }\n\n    // let that = this\n    // console.log(timestamp)\n    // console.log(1000/(timestamp - this.oldTime))\n    this.fps = 1000/(timestamp - this.oldTime)\n    this.oldTime = timestamp\n\n    this.copyVramToImage()\n\n    Promise.all([\n      createImageBitmap(this._layerOne, {\n        resizeQuality: 'pixelated',\n        colorSpaceConversion: 'none',\n        premultiplyAlpha: 'premultiply',\n        resizeWidth: this.canvas.width,\n        resizeHeight: this.canvas.height,\n      })\n    ]).then(function(bitmaps){\n      // this.ctx.putImageData(this._imageData, 0, 0)\n\n      this.ctx.drawImage(bitmaps[0], 0, 0)\n\n      requestAnimationFrame(this.render.bind(this))\n    }.bind(this))\n\n  }\n\n  startGPU(){\n    requestAnimationFrame(this.render.bind(this))\n  }\n\n  // R, G, B are uint8 typed\n  // x, y are absolute typed\n  setPixel(x, y, R, G, B, layerNumber = 0){\n      let layerData\n      if (layerNumber === 0){\n        layerData = this._layerOne.data\n      }\n\n      let index = (x  + y *this.xsize) * 4\n      layerData[index + 0] = R\n      layerData[index + 1] = G\n      layerData[index + 2] = B\n      layerData[index + 3] = 255\n  }\n\n}\n\nexport default new gpu()\n// module.exports = gpu\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Modules/gpu.js","\n\nclass audio{\n  constructor(){\n    // Delay and sound timer registers\n    this.DELAY = new Uint8ClampedArray(1)\n    this.SOUND = new Uint8ClampedArray(1)\n\n\n    this.audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n\t\tthis.vol =  0;\n    this.frequency = 520 // Hz\n  }\n\n  startAudio(){\n    this.oscillator = this.audioCtx.createOscillator();\n    this.gainNode = this.audioCtx.createGain();\n\n    this.oscillator.type = 'sine'; //sine, sawtooth, square, triangle, custom\n    this.oscillator.frequency.value = this.frequency;\n    this.oscillator.start();\n\n    this.gainNode.gain.value = this.vol;\n    this.oscillator.connect(this.gainNode);\n    this.gainNode.connect(this.audioCtx.destination)\n  }\n\n  updateAudio(){\n    this.oscillator.frequency.value = this.frequency;\n    this.gainNode.gain.value = this.vol;\n  }\n  flushRegisters(){\n\n    this.DELAY[0] = 0x00\n    this.SOUND[0] = 0x00\n\n  }\n\n  configure(options){\n    this.frequency = options.frequency\n    this.clockingInterval = options.clockingInterval\n  }\n\n  startAudioLoop(){\n    if(this.timer){\n      clearInterval(this.timer)\n    }\n    // 60Hz the counter will decrement\n    this.timer = setInterval(function(){\n      this.SOUND[0]--\n      this.DELAY[0]--\n\n      this.updateAudio()\n      // this.frequency++\n      if (this.SOUND[0] === 0){\n        this.vol = 0\n      } else {\n        this.vol = 0.5\n      }\n    }.bind(this), this.clockingInterval )/// 60)\n  }\n\n}\n\n\nexport default new audio()\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Modules/audio.js","//chip8 系统本生\n\nimport cpu from './cpu.js'\nimport gpu from './gpu.js'\nimport audio from './audio.js'\nimport hexData from './hexData.js'\n\nclass chip8 {\n  constructor(){\n    this.cpu = cpu\n    this.gpu = gpu\n    this.audio = audio\n\n    this.IO = {\n      0: false, 1: false, 2: false, 3: false,\n      4: false, 5: false, 6: false, 7: false,\n      8: false, 9: false, A: false, B: false,\n      C: false, D: false, E: false, F: false\n    }\n\n    this.map = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'A', 'B', 'C', 'D', 'E', 'F']\n\n  }\n\n  configureGPU(canvasEl, options){\n    // console.log(this.gpu)\n    this.gpu.setCanvas(canvasEl)\n    this.gpu.configure(options)\n  }\n\n  configureCPU(options){\n    this.cpu.configure(options)\n  }\n\n  configureAudio(options){\n    this.audio.configure(options)\n  }\n\n  // init\n  initSystem(){\n    this.initCPU()\n    this.initGPU()\n    this.initAudio()\n    this.initRAM()\n  }\n\n  initCPU(){\n    this.cpu.flushRegisters()\n  }\n\n  initGPU(){\n    this.gpu.startGPU()\n  }\n\n  initAudio(){\n    this.audio.startAudio()\n  }\n\n  initRAM(){\n    this.cpu.RAM.clearMemory()\n  }\n\n  // restart\n  restartSystem(){\n    this.restartFlag = true\n    this.restartCPU()\n    this.restartGPU()\n    this.restartAudio()\n  }\n\n  // load hex charset\n\n\n  restartCPU(){\n\n    this.cpu.reset()\n    this.cpu.RAM.clearMemory()\n    for (let i = 0; i < 16; i++){\n      this.cpu.RAM.DMA(hexData[i] , i*5)\n    }\n\n  }\n\n  restartGPU(){\n    this.gpu.clearScreen()\n  }\n\n  restartAudio(){\n    this.audio.flushRegisters()\n    this.audio.startAudioLoop()\n  }\n\r\n  onWindowResize(w, h){\r\n    this.gpu.adjustWindowSize(w, h)\r\n  }\n  // According to reference, most programs ram located at 0x200, or 512 offset\n  loadProgramIntoRam(arr, offset = 512){\n    this.cpu.RAM.DMA(arr, offset)\n  }\n\r\n  startCPUProgramOn(address){\n    // this.cpu.pushStack(1)\n    // this.cpu.pushStack(1)\n    // this.cpu.pushStack(1)\n    // console.log(this.cpu.popStack())\n    //     console.log(this.cpu.popStack())\n    //         console.log(this.cpu.popStack())\r\n    this.cpu.startCPUProgramOn(address)\r\n  }\r\n\r\n  stopClock(){\r\n    if (this.clock){\r\n      clearInterval(this.clock)\r\n    }\r\n  }\r\n\r\n  configClock(options){\r\n    this.debug = options.debug\r\n    this.clockingInterval = options.clockingInterval\r\n    this.updateDebuggerOneTick = options.updateDebuggerOneTick\r\n  }\r\n\n  resumeClock(){\n\n    this.stopClock()\n    this.clock = setInterval(function(){\n\n      for (let i = 0; i < 19; i++){\n        this.processOneCycle()\n        if (this.stopSignal){\n          this.stopSignal = false\n          break\n        }\n      }\n\n    }.bind(this), this.clockingInterval)\n  }\r\n  startClock(options){\r\n    this.configClock(options)\r\n\r\n    this.resumeClock()\r\n  }\r\n\r\n  processOneCycle(){\r\n    this.tickOneClockCycle()\n    // debugging\n    if (this.debug){\n      this.updateDebuggerOneTick()\n    }\r\n\r\n  }\n  tickOneClockCycle(){\r\n      // process Gpu commands (if needed)\r\n      // let randomX = Math.floor(Math.random()*64)\n      // let randomY = Math.floor(Math.random()*32)\n      // let randomR = Math.floor(Math.random()*256)\n      // let randomG = Math.herefloor(Math.random()*256)\n      // let randomB = Math.floor(Math.random()*256)\n      // this.gpu.setPixel(randomX, randomY,randomR,randomG,randomB)\n\r\n      if (!this.cpu.PC[0]){\r\n        return\r\n      }\r\n      // process CPU commands (if needed)\r\n      // let fakeOpcode = 'ADD V1 V3'\r\n      let upper = this.cpu.loadFromMem(this.cpu.PC[0])\r\n      let lower = this.cpu.loadFromMem(this.cpu.PC[0] + 1)\r\n      let opcode = (upper << 8) + lower\r\n\r\n      // debug purposes\r\n      let opcodeHexStr = Number(upper).toString(16).padStart(2, '0') + Number(lower).toString(16).padStart(2, '0')\r\n      this.currentOpcode =\r\n        '0x' + opcodeHexStr +\r\n        ' ' +  this.processOpcode(opcode)  +\r\n        '  ，  PC： ' + this.cpu.PC\n\r\n      // increment PC counter\r\n      this.cpu.PC[0] += 2 // since each instructor is 2 bytes long\r\n  }\n\r\n  processOpcode(opcode){\n\n    // Super Chip8 instruction set\n    if (opcode === 0x00FF){\n      this.gpu.configure({\n        xsize: 128,\n        ysize: 64,\n      })\n      return 'HIGH'\n    } else if (opcode === 0x00FE)\n    {\n      this.gpu.configure({\n        xsize: 64,\n        ysize: 32,\n      })\n      return 'LOW'\n    }\n\r\n    // normal Chip8 instruction set\r\n    let opcodeDesc\r\n    switch(opcode & 0xF000){\r\n      case 0x0000:\r\n        if (opcode === 0x00E0){\r\n          opcodeDesc = 'CLS'\n\n          this.gpu.clearScreen()\r\n        } else if (opcode === 0x00EE){\r\n          opcodeDesc = 'RET'\n\n          this.cpu.PC[0] = this.cpu.popStack()\r\n        } else {\r\n          opcodeDesc = 'SYS' // <==> JP\n          var {nnn, desc} = this.nnn(opcode)\n\n          opcodeDesc += desc\n          // this.cpu.PC[0] = nnn - 2\r\n        }\r\n        break\r\n      case 0x1000:\r\n        opcodeDesc = 'JP'\r\n        var {nnn, desc} = this.nnn(opcode)\n        opcodeDesc += desc\n\n        this.cpu.PC[0] = nnn - 2\r\n        break\r\n      case 0x2000:\r\n        opcodeDesc = 'CALL'\n        var {nnn, desc} = this.nnn(opcode)\n        opcodeDesc += desc\n\n        this.cpu.pushStack(this.cpu.PC[0])\n        this.cpu.PC[0] = nnn - 2\r\n        break\r\n      case 0x3000:\r\n        opcodeDesc = 'SE'\n        var {x, kk, desc} = this.xkk(opcode)\n        opcodeDesc += desc\n\n        if (this.cpu.V[x] === kk){\n          this.cpu.PC[0] += 2\n        }\r\n        break\r\n      case 0x4000:\r\n        opcodeDesc = 'SNE'\n        var {x, kk, desc} = this.xkk(opcode)\n        opcodeDesc += desc\n\n        if (this.cpu.V[x] !== kk){\n          this.cpu.PC[0] += 2\n        }\r\n        break\r\n      case 0x5000:\r\n        opcodeDesc = 'SE'\n        var {x, y, desc} = this.xy(opcode)\n        opcodeDesc += desc\n\n        if (this.cpu.V[x] === this.cpu.V[y]){\n          this.cpu.PC[0] += 2\n        }\r\n        break\r\n      case 0x6000:\r\n        opcodeDesc = 'LD'\r\n        var {x, kk, desc} = this.xkk(opcode)\r\n        opcodeDesc += desc\n\n        this.cpu.V[x] = kk\r\n        break\r\n      case 0x7000:\r\n        opcodeDesc = 'ADD'\n        var {x, kk, desc} = this.xkk(opcode)\n        opcodeDesc += desc\n\n        this.cpu.V[x] += kk\r\n        break\r\n      case 0x8000:\n        var {x, y, desc} = this.xy(opcode)\n\n        var key = opcode & 0xF\n        if (key === 0){\n          opcodeDesc = 'LD'\n\n          this.cpu.V[x] = this.cpu.V[y]\n        } else if (key === 1){\n          opcodeDesc = 'OR'\n\n          this.cpu.V[x] |= this.cpu.V[y]\n        } else if (key === 2){\n          opcodeDesc = 'AND'\n\n          this.cpu.V[x] &= this.cpu.V[y]\n        } else if (key === 3){\n          opcodeDesc = 'XOR'\n\n          this.cpu.V[x] ^= this.cpu.V[y]\n        } else if (key === 4){\n          opcodeDesc = 'ADD'\n\n          if (this.cpu.V[x] + this.cpu.V[y] > 255){\n            this.cpu.V[0xF] = 1\n          } else {\n            this.cpu.V[0xF] = 0\n          }\n          this.cpu.V[x] += this.cpu.V[y]\n        } else if (key === 5){\n          opcodeDesc = 'SUB'\n\n          if (this.cpu.V[x] - this.cpu.V[y] > 0){\n            this.cpu.V[0xF] = 1\n          } else {\n            this.cpu.V[0xF] = 0\n          }\n          this.cpu.V[x] -= this.cpu.V[y]\n        } else if (key === 6){\n          opcodeDesc = 'SHR'\n\n          if (this.cpu.V[x] & 0x1 === 1){\n            this.cpu.V[0xF] = 1\n          } else {\n            this.cpu.V[0xF] = 0\n          }\n          this.cpu.V[x] >>>= 1\n        } else if (key === 7){\n          opcodeDesc = 'SUBN'\n\n          if (this.cpu.V[y] - this.cpu.V[x] > 0){\n            this.cpu.V[0xF] = 1\n          } else {\n            this.cpu.V[0xF] = 0\n          }\n          this.cpu.V[x] = this.cpu.V[y] - this.cpu.V[x]\n        } else if (key === 0xE){\n          opcodeDesc = 'SHL'\n\n          if ((this.cpu.V[x] >> 7) % 2 === 1){\n            this.cpu.V[0xF] = 1\n          } else {\n            this.cpu.V[0xF] = 0\n          }\n          this.cpu.V[x] <<= 1\n        }\n        opcodeDesc += desc\r\n        break\r\n      case 0x9000:\r\n        opcodeDesc = 'SNE'\n        var {x, y, desc} = this.xy(opcode)\n        opcodeDesc += desc\n\n        if (this.cpu.V[x] !== this.cpu.V[y]){\n          this.cpu.PC[0]+=2\n        }\n\r\n        break\r\n      case 0xA000:\r\n        opcodeDesc = 'LD'\n        var {nnn, desc} = this.nnn(opcode)\n        opcodeDesc += desc\n\n        this.cpu.I[0] = nnn\n\r\n        break\r\n      case 0xB000:\r\n        opcodeDesc = 'JP'\n        var {nnn, desc} = this.nnn(opcode)\n        opcodeDesc += desc\n\n        this.cpu.PC[0] = nnn + this.cpu.V[0] - 2\r\n        break\r\n      case 0xC000:\r\n        opcodeDesc = 'RND'\n        var {x, kk, desc} = this.xkk(opcode)\n        opcodeDesc += desc\n\n        var randomByte = Math.floor(Math.random()*256)\n        this.cpu.V[x] = randomByte & kk\n\r\n        break\r\n      case 0xD000:\r\n        opcodeDesc = 'DRW'\n        var {x, y, n, desc} = this.xyn(opcode)\n        opcodeDesc += desc\n        let xPos = this.cpu.V[x]\n        let yPos = this.cpu.V[y]\n        let spriteArray = this.cpu.RAM.getMemoryChunk(this.cpu.I[0], n)\n        this.cpu.V[0x0f] = this.gpu.drawSprite(xPos, yPos, spriteArray)\r\n        break\r\n      case 0xE000:\n        var {x, kk, desc} = this.xkk(opcode)\n\n        if (kk === 0x9E){\n          opcodeDesc = 'SKP'\n          opcodeDesc += desc\n\n          var key = this.map[this.cpu.V[x]]\n          if (this.IO[key]){\n            this.cpu.PC[0]+=2\n          }\n        } else if (kk === 0xA1){\n          opcodeDesc = 'SKNP'\n          opcodeDesc += desc\n\n          var key = this.map[this.cpu.V[x]]\n          if (!this.IO[key]){\n            this.cpu.PC[0]+=2\n          }\n        }\r\n        break\r\n      case 0xF000:\r\n        var {x, kk, desc} = this.xkk(opcode)\n\n        if (kk === 0x07){\n          opcodeDesc = 'LD'\n          opcodeDesc += desc\n          opcodeDesc += ' DT'\n\n          this.cpu.V[x] = this.audio.DELAY[0]\n        } else if (kk === 0x0A){\n          opcodeDesc = 'LD'\n          opcodeDesc += desc\n          opcodeDesc += ' K'\n          console.log('here')\n          this.stopClock()\n          this.stopSignal = true\n          this.waitForKeyFlag = true\n          this.waitForKeyReg = x\n\n        } else if (kk === 0x15){\n          opcodeDesc = 'LD'\n          opcodeDesc += ' DT'\n          opcodeDesc += desc\n\n          this.audio.DELAY[0] = this.cpu.V[x]\n        } else if (kk === 0x18){\n          opcodeDesc = 'LD'\n          opcodeDesc += ' ST'\n          opcodeDesc += desc\n\n          this.audio.SOUND[0] = this.cpu.V[x]\n        } else if (kk === 0x1E){\n          opcodeDesc = 'ADD'\n          opcodeDesc += ' I'\n          opcodeDesc += desc\n\n          this.cpu.I[0] += this.cpu.V[x]\n        } else if (kk === 0x29){\n          opcodeDesc = 'LD'\n          opcodeDesc += ' F'\n          opcodeDesc += desc\n\n          this.cpu.I[0] = 5 * this.cpu.V[x]\n\n        } else if (kk === 0x33){\n          opcodeDesc = 'LD'\n          opcodeDesc += ' BCD'\n          opcodeDesc += desc\n\n         this.cpu.RAM.storeToMem(this.cpu.I[0], Math.floor(this.cpu.V[x] / 100) % 10)\n         this.cpu.RAM.storeToMem(this.cpu.I[0] + 1, Math.floor(this.cpu.V[x] / 10) % 10)\n         this.cpu.RAM.storeToMem(this.cpu.I[0] + 2, Math.floor(this.cpu.V[x] / 1) % 10)\n          // this.cpu.RAM[this.cpu.I[0]] = (this.cpu.V[x] / 100) % 10\n          // this.cpu.RAM[this.cpu.I[0] + 1] = (this.cpu.V[x] / 10) % 10\n          // this.cpu.RAM[this.cpu.I[0] + 2] = (this.cpu.V[x] / 1) % 10\n        } else if (kk === 0x55){\n          opcodeDesc = 'LD'\n          opcodeDesc += ' [I]'\n          opcodeDesc += desc\n\n          for (let i = 0; i <= x; i++){\n            this.cpu.RAM.storeToMem(this.cpu.I[0] + i, this.cpu.V[i])\n            // this.cpu.RAM[this.cpu.I[0] + i] = this.cpu.V[i]\n          }\n          // this.cpu.RAM.DMA(this.cpu.V, this.cpu.I[0])\n        } else if (kk === 0x65){\n          opcodeDesc = 'LD'\n          opcodeDesc += desc\n          opcodeDesc += ' [I]'\n\n          // this.cpu.V = this.cpu.RAM.getMemoryChunk(this.cpu.I[0], 16)\n          for (let i = 0; i <= x; i++){\n            this.cpu.V[i] = this.cpu.RAM.loadFromMem(this.cpu.I[0] + i)\n          }\n        }\n\r\n        break\r\n    }\r\n\r\n    return opcodeDesc\r\n  }\n\n  waitForKeyCallback(key){\n    this.resumeClock()\n    this.cpu.V[this.waitForKeyReg] = Number('0x' + key)\n    this.stopSignal = false\n    this.waitForKeyFlag = false\n    // this.waitForKeyReg = x\n  }\r\n\r\n  // helper functions for bytecode -> opcode\r\n  xkk(opcode){\r\n    let regIndex = (opcode & 0x0F00) >> 8\r\n    let byteData = (opcode & 0x00FF)\r\n    let opcodeDesc = ' V' + regIndex + ' ' + Number(byteData).toString(16)\r\n    return {x: regIndex, kk: byteData, desc: opcodeDesc}\r\n  }\r\n  xy(opcode){\r\n    let reg1 = (opcode & 0x0F00) >> 8\r\n    let reg2 = (opcode & 0x00F0) >> 4\r\n    let opcodeDesc = ' V' + reg1 + ' V' + reg2\r\n    return {x: reg1, y: reg2, desc: opcodeDesc}\r\n  }\r\n  nnn(opcode){\r\n    let addr = (opcode & 0x0FFF)\r\n    let opcodeDesc = ' $' + Number(addr).toString(16)\r\n    return {nnn: addr, desc: opcodeDesc}\r\n  }\n  xyn(opcode){\n    let reg1 = (opcode & 0x0F00) >> 8\r\n    let reg2 = (opcode & 0x00F0) >> 4\n    let nibble = (opcode & 0x000F)\n    let opcodeDesc = ' V' + reg1 + ' V' + reg2 + ' nib: ' + nibble\n    return {x: reg1, y: reg2, n: nibble, desc: opcodeDesc}\n  }\r\n\n  // debug purposes\n  getCPUDebugParameters(){\n    return {\r\n      fps: Math.floor(this.gpu.fps),\n      V: this.cpu.V,\n      I: this.cpu.I,\n      DELAY: this.audio.DELAY,\n      SOUND: this.audio.SOUND,\n      PC: this.cpu.PC,\n      SP: this.cpu.SP,\n      STACK: this.cpu.stack,\n      IO: this.IO,\n      RAM: {RAM: this.cpu.RAM.RAM},\n    }\n  }\n}\n\nexport default new chip8()\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Modules/chip8.js","<template>\n\n  <div id=\"cli\">\n\n    <div id=\"history\">\n      <div v-for=\"(command, index) in commandHistory\" :key=\"index\">\n        <label class=\"commandTag\" for=\"\">{{index}}>> </label>\n        <span class=\"command\"> {{ command }} </span>\n      </div>\n    </div>\n\n\n    <table id='internalRegs'>\n      <tr>\n        <td>register</td>\n        <td>值</td>\n      </tr>\n      <tr v-for=\"(value, key) in debug\" :key=\"key\">\n        <td>{{key}}</td>\n        <td>{{value}}</td>\n      </tr>\n    </table>\n\n  </div>\n\n</template>\n\n<script>\nexport default {\n  name: 'Chip8Debugger',\n  props: {\n      debug: {\n          type: Object,\n          // Object or array defaults must be returned from\n          // a factory function\n          default: function () {\n            return {\n                  V: new Uint8Array(16),\n                  I: new Uint16Array(1),\n                  DELAY: new Uint8Array(1),\n                  SOUND: new Uint8Array(1),\n                  PC: new Uint16Array(1),\n                  SP: new Uint8Array(1),\n                  STACK: Uint16Array(16),\n                  RAM: Uint8Array(32),\n                }\n          }\n      },\n      commandHistory: {\n        type: Array,\n        default: function () {\n          return ['asdf', 'b',]\n        }\n      }\n  },\n  data () {\n    return {\n      // visuals\n      // commandHistory: ['asdf', 'b',],\n    }\n  }\n}\n</script>\n\n<style scoped lang='less'>\n  @debugBorder: 00.2cm groove orange;\n  @cliWidth: 60%;\n  @tableWidth: 33%;\n\n  div#cli{\n    float:left;\n    table#internalRegs{\n      position:relative;\n      width: @tableWidth;\n      td, th, tr{\n        border: 0.1cm groove black;\n        font-size: 20px;\n      }\n    }\n\n    #history{\n      position: relative;\n      margin: 0 0 0 0;\n      border: @debugBorder;\n      width: @cliWidth;\n                  // margin-left: 10%;\n      text-align: left;\n      float: left;\n      div{\n        position:relative;\n                font-size: 20px;\n        .command{\n\n        }\n        .commandTag{\n          color: blue;\n        }\n      }\n    }\n  }\n\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/internalDebugger.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"cli\"}},[_c('div',{attrs:{\"id\":\"history\"}},_vm._l((_vm.commandHistory),function(command,index){return _c('div',{key:index},[_c('label',{staticClass:\"commandTag\",attrs:{\"for\":\"\"}},[_vm._v(_vm._s(index)+\">> \")]),_vm._v(\" \"),_c('span',{staticClass:\"command\"},[_vm._v(\" \"+_vm._s(command)+\" \")])])}),0),_vm._v(\" \"),_c('table',{attrs:{\"id\":\"internalRegs\"}},[_vm._m(0),_vm._v(\" \"),_vm._l((_vm.debug),function(value,key){return _c('tr',{key:key},[_c('td',[_vm._v(_vm._s(key))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(value))])])})],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',[_c('td',[_vm._v(\"register\")]),_vm._v(\" \"),_c('td',[_vm._v(\"值\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f30bd0da\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/internalDebugger.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f30bd0da\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./internalDebugger.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./internalDebugger.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./internalDebugger.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f30bd0da\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./internalDebugger.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f30bd0da\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/internalDebugger.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"body\">\n\n\n    <div id=\"gui\">\n      <canvas id=\"screen\"></canvas>\n    </div>\n\n    <div id=\"ROMS\">\n      <label for=\"\">test ROMS</label>\n      <select v-on:change=\"loadROM\">\n        <option value=\"testRoms/BC_test.ch8\">bc test</option>\n        <option value=\"testRoms/c8_test.ch8\">c8 test</option>\n        <option value=\"testRoms/KeypadTest.ch8\">keypad test</option>\n        <option value=\"testRoms/test_opcode.ch8\">opcode test</option>\n      </select>\n\n      <label for=\"\">game ROMS</label>\n      <select v-on:change=\"loadROM\">\r\n        <option value=\"gameRoms/Space Invaders.ch8\">Space Invaders</option>\n        <option value=\"gameRoms/Blitz.ch8\">Blitz</option>\n        <option value=\"gameRoms/Breakout.ch8\">Breakout</option>\n        <option value=\"gameRoms/Brix.ch8\">Brix</option>\n        <option value=\"gameRoms/Connect4.ch8\">Connect4</option>\n        <option value=\"gameRoms/Flightrunner.ch8\">Flightrunner</option>\n        <option value=\"gameRoms/Hidden.ch8\">Hidden</option>\n        <option value=\"gameRoms/Merlin.ch8\">Merlin</option>\n        <option value=\"gameRoms/Missile.ch8\">Missile</option>\n        <option value=\"gameRoms/Outlaw.ch8\">Outlaw</option>\n        <option value=\"gameRoms/Pong.ch8\">Pong</option>\n        <option value=\"gameRoms/Tank.ch8\">Tank</option>\n        <option value=\"gameRoms/TicTac.ch8\">TicTac</option>\n        <option value=\"gameRoms/UFO.ch8\">UFO</option>\n        <option value=\"gameRoms/Vers.ch8\">Vers</option>\n\n        <option value=\"gameRoms/1dcell.ch8\">1dcell</option>\n        <option value=\"gameRoms/8ceattourny_d1.ch8\">8ceattourny_d1</option>\n\n        <option value=\"gameRoms/blackrainbow.ch8\">blackrainbow </option>\n\n        <option value=\"gameRoms/snake.ch8\">snake </option>\n\n        <option value=\"gameRoms/trucksimul8or.ch8\">trucksimul8or </option>\n\n        <option value=\"gameRoms/supersquare.ch8\">supersquare </option>\n\n        <option value=\"gameRoms/Tetris.ch8\">tetris </option>\n      </select>\n\n       <br><br>\n       <label for=\"\">scale</label>\n      <input type=\"range\" v-model=\"canvasScale\" value=\"80\"\n            v-on:change=\"processWindowAdjust\">{{canvasScale/100}}\n\n            <label for=\"\">game speed</label>\n      fast<input type=\"range\" v-model=\"gameSpeed\" value=\"80\"\n            v-on:change=\"processGameSpeedAdjust\">slow\n\n     <input type=\"button\" value=\"oneCycle\" v-on:click=\"oneCycle\">\n      <input type=\"button\" value=\"continue\" v-on:click=\"startEmulation\">\n      <input type=\"button\" value=\"pause\" v-on:click=\"stopEmulation\">\n      <input type=\"button\" value=\"restart\" v-on:click=\"restartEmulation\">\n    </div>\n\n    <div id=\"controls\">\n       <p>controls</p>\n       <input type=\"button\" value=\"1\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"2\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"3\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"C\" v-on:click=\"processInput\">\n       <br>\n       <input type=\"button\" value=\"4\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"5\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"6\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"D\" v-on:click=\"processInput\">\n       <br>\n       <input type=\"button\" value=\"7\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"8\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"9\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"E\" v-on:click=\"processInput\">\n       <br>\n       <input type=\"button\" value=\"A\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"0\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"B\" v-on:click=\"processInput\">\n       <input type=\"button\" value=\"F\" v-on:click=\"processInput\">\n    </div>\n    <chip8Debugger v-bind:debug=\"chip8InternalDebugData\"\n                   v-bind:commandHistory=\"chip8OpcodeHistory\"></chip8Debugger>\n\n\n  </div>\n</template>\n\n<script>\nimport chip8 from './Modules/chip8.js'\n// import opcodeDecoder from './Modules/opcodeDecoder.js'\nimport fileLoader from './Modules/fileLoader.js'\nimport chip8Debugger from './internalDebugger'\n\nexport default {\n  name: 'CLI',\n  components: {\n    chip8Debugger\n  },\n  data () {\n    return {\n      // visuals\n      canvasScale: 80, // default out of 100\n      screenX: 64, // default\n      screenY: 32, // default\n\n      // chip-8 emulator\n      chip8: null,\n      clock: null,\n      gameSpeed: 30, // default\n\n      // for I/O\n      地图: {\n        1: '1', 2: '2',3: '3',4: 'C',\n        q: '4', w: '5',e: '6',r: 'D',\n        a: '7', s: '8',d: '9',f: 'E',\n        z: 'A', x: '0',c: 'B',v: 'F',\n      },\n\n      // 调试\n      chip8OpcodeHistory: [],\n      chip8InternalDebugData: {},\n    }\n  },\n  mounted: function(){\n    this.chip8 = chip8\n    this.chip8InternalDebugData = this.chip8.getCPUDebugParameters()\n    const canvasEl = document.getElementById('screen')\n\n\n    this.chip8.configureGPU(canvasEl, {\n      xsize: 64,\n      ysize: 32,\n    })\n    this.chip8.configureCPU({\n      clockSpeed: 540, //Hz, meaning 540 / 60 = 9 instructions per 1/60 seconds\n      ramSize: 4096, // 4kB of RAM\n    })\n    this.chip8.configureAudio({\n      frequency: 540,\n      clockingInterval: 1000 / 60,\n    })\n    this.chip8.initSystem()\n\n    this.chip8.configClock({\n      debug: true,\n      clockingInterval: this.gameSpeed,\n      updateDebuggerOneTick: this.updateDebuggerOneTick.bind(this),\n    })\n\n    // 设置 输入\n    window.onkeydown = this.processInputFromKeyboardKeyDown\n    window.onkeyup = this.processInputFromKeyboardKeyUp\n    window.onresize = this.processWindowAdjust\n    this.processWindowAdjust()\r\n\r\n    // Load the default game ROM\r\n    this.loadROM('gameRoms/Pong.ch8')\n  },\n  methods: {\n    // load ROM I/O\n    loadROM: function(e){\n      this.currentROM = e\n      fileLoader.loadROM(e, (arr) => {\n        // restart the system but keep the GPU running\n        const canvasEl = document.getElementById('screen')\n        this.chip8.configureGPU(canvasEl, {\n          xsize: 64,\n          ysize: 32,\n        })\n        this.chip8.restartSystem()\n        this.chip8.loadProgramIntoRam(arr, 0x200)\n        this.clearDebugInfo()\n\n        // where to start program\n        this.chip8.startCPUProgramOn(0x200)\n\n        // this.stopEmulation()\n        this.startEmulation()\n\n      })\n    },\n    oneCycle: function(){\n      this.chip8.processOneCycle()\n    },\n    restartEmulation: function(){\n      if (!this.currentROM){\n        alert('先选个游戏硬盘')\n      } else {\n        this.loadROM(this.currentROM)\n      }\n    },\n    stopEmulation: function(){\n      this.chip8.stopClock()\n    },\n    startEmulation: function(){\n      this.chip8.stopClock()\n      this.chip8.resumeClock()\n    },\n    clearDebugInfo: function(){\n      // 调试\n      this.chip8OpcodeHistory =  []\n      this.chip8InternalDebugData =  {}\n    },\n    // keyboard input I/O\n    processInputFromKeyboardKeyDown: function(e){\n      // flag to cpu of keypress\n      this.chip8.keyPressedFlag = true\n      let 钥匙 = e.key || e.target.value\n      if (this.地图[钥匙]){\n        let btn = this.地图[钥匙]\n        this.chip8.keyPressed = btn\n        this.processInput(btn, true, false)\n      }\n    },\n    processInputFromKeyboardKeyUp: function(e){\n      this.chip8.keyPressedFlag = false\n      let 钥匙 = e.key || e.target.value\n      if (this.地图[钥匙]){\n        let btn = this.地图[钥匙]\n        this.chip8.keyPressed = btn\n        this.processInput(btn, false, false)\n      }\n    },\n    processInput: function(e, press, direct = true){\n      let 钥匙 = direct ? e.target.value : e\n\n      console.log(钥匙)\n      // 未完成\n\n      this.chip8.IO[钥匙] = press\n      console.log(this.chip8.IO[钥匙])\n\n      if(this.chip8.waitForKeyFlag){\n        console.log('callback')\n        this.chip8.waitForKeyCallback(钥匙)\n      }\n    },\n    updateDebuggerOneTick(opcode){\n      if (this.chip8OpcodeHistory.length > 100){\n        this.chip8OpcodeHistory.pop()\n      }\n      this.chip8OpcodeHistory.unshift(this.chip8.currentOpcode)\n\n      this.chip8InternalDebugData = this.chip8.getCPUDebugParameters()\n    },\n    processGameSpeedAdjust: function(e){\n      this.chip8.configClock({\n        debug: true,\n        clockingInterval: this.gameSpeed,  // 1000 / 60\n        updateDebuggerOneTick: this.updateDebuggerOneTick.bind(this),\n      })\n      this.startEmulation()\n    },\n    processWindowAdjust: function(e){\n      this.screenX = this.chip8.gpu.xsize\n      this.screenY = this.chip8.gpu.ysize\n\n      // let winW = window.innerWidth\n      // let winH = window.innerHeight\n      let minWin = window.innerWidth // Math.sqrt(winW*winH)\n\n      let canvasWidth = minWin * this.canvasScale / 100\n      let canvasHeight = minWin * this.screenY /this.screenX * this.canvasScale / 100\n      // console.log(canvasWidth, canvasHeight)\n      this.chip8.onWindowResize(canvasWidth, canvasHeight)\n      return {canvasWidth: canvasWidth, canvasHeight: canvasHeight}\n    }\n\n  },\n\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"less\" scoped>\ndiv#body{\n\n  div#gui{\n    position: relative;\n    margin-top: 0%;\n    canvas#screen{\n      background-color: green;\n    }\n  }\n\n  div#ROMS{\n    position: relative;\n    select{\n      font-size: 20px;\n    }\n    input{\n      font-size: 20px;\n    }\n  }\n\n  div#controls{\n    position: relative;\n    width: 33%;\n    left: 33%;\n    // right: 0%;\n    border: 10px solid black;\n    p{\n      margin: 0 0 0 0;\n      color: green;\n    }\n    input{\n      margin: 1px 1px 1px 1px;\n      width: 13%;\n\n    }\n  }\n\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Chip8Debug.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"body\"}},[_vm._m(0),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"ROMS\"}},[_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\"test ROMS\")]),_vm._v(\" \"),_c('select',{on:{\"change\":_vm.loadROM}},[_c('option',{attrs:{\"value\":\"testRoms/BC_test.ch8\"}},[_vm._v(\"bc test\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"testRoms/c8_test.ch8\"}},[_vm._v(\"c8 test\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"testRoms/KeypadTest.ch8\"}},[_vm._v(\"keypad test\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"testRoms/test_opcode.ch8\"}},[_vm._v(\"opcode test\")])]),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\"game ROMS\")]),_vm._v(\" \"),_c('select',{on:{\"change\":_vm.loadROM}},[_c('option',{attrs:{\"value\":\"gameRoms/Space Invaders.ch8\"}},[_vm._v(\"Space Invaders\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Blitz.ch8\"}},[_vm._v(\"Blitz\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Breakout.ch8\"}},[_vm._v(\"Breakout\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Brix.ch8\"}},[_vm._v(\"Brix\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Connect4.ch8\"}},[_vm._v(\"Connect4\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Flightrunner.ch8\"}},[_vm._v(\"Flightrunner\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Hidden.ch8\"}},[_vm._v(\"Hidden\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Merlin.ch8\"}},[_vm._v(\"Merlin\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Missile.ch8\"}},[_vm._v(\"Missile\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Outlaw.ch8\"}},[_vm._v(\"Outlaw\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Pong.ch8\"}},[_vm._v(\"Pong\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Tank.ch8\"}},[_vm._v(\"Tank\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/TicTac.ch8\"}},[_vm._v(\"TicTac\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/UFO.ch8\"}},[_vm._v(\"UFO\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Vers.ch8\"}},[_vm._v(\"Vers\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/1dcell.ch8\"}},[_vm._v(\"1dcell\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/8ceattourny_d1.ch8\"}},[_vm._v(\"8ceattourny_d1\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/blackrainbow.ch8\"}},[_vm._v(\"blackrainbow \")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/snake.ch8\"}},[_vm._v(\"snake \")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/trucksimul8or.ch8\"}},[_vm._v(\"trucksimul8or \")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/supersquare.ch8\"}},[_vm._v(\"supersquare \")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"gameRoms/Tetris.ch8\"}},[_vm._v(\"tetris \")])]),_vm._v(\" \"),_c('br'),_c('br'),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\"scale\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.canvasScale),expression:\"canvasScale\"}],attrs:{\"type\":\"range\",\"value\":\"80\"},domProps:{\"value\":(_vm.canvasScale)},on:{\"change\":_vm.processWindowAdjust,\"__r\":function($event){_vm.canvasScale=$event.target.value}}}),_vm._v(_vm._s(_vm.canvasScale/100)+\"\\n\\n          \"),_c('label',{attrs:{\"for\":\"\"}},[_vm._v(\"game speed\")]),_vm._v(\"\\n    fast\"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.gameSpeed),expression:\"gameSpeed\"}],attrs:{\"type\":\"range\",\"value\":\"80\"},domProps:{\"value\":(_vm.gameSpeed)},on:{\"change\":_vm.processGameSpeedAdjust,\"__r\":function($event){_vm.gameSpeed=$event.target.value}}}),_vm._v(\"slow\\n\\n   \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"oneCycle\"},on:{\"click\":_vm.oneCycle}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"continue\"},on:{\"click\":_vm.startEmulation}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"pause\"},on:{\"click\":_vm.stopEmulation}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"restart\"},on:{\"click\":_vm.restartEmulation}})]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"controls\"}},[_c('p',[_vm._v(\"controls\")]),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"1\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"2\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"3\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"C\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"4\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"5\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"6\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"D\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"7\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"8\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"9\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"E\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"A\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"0\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"B\"},on:{\"click\":_vm.processInput}}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"button\",\"value\":\"F\"},on:{\"click\":_vm.processInput}})]),_vm._v(\" \"),_c('chip8Debugger',{attrs:{\"debug\":_vm.chip8InternalDebugData,\"commandHistory\":_vm.chip8OpcodeHistory}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"gui\"}},[_c('canvas',{attrs:{\"id\":\"screen\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-013fd283\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Chip8Debug.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-013fd283\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Chip8Debug.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chip8Debug.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Chip8Debug.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-013fd283\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Chip8Debug.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-013fd283\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Chip8Debug.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <Chip8Debug/>\n  </div>\n</template>\n\n<script>\nimport Chip8Debug from './components/Chip8Debug'\n\nexport default {\n  name: 'App',\n  components: {\n    Chip8Debug,\n  }\n}\n</script>\n\n<style scoped>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Chip8Debug')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4e77b622\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4e77b622\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4e77b622\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4e77b622\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport less from 'less'\n\nVue.config.productionTip = false\nVue.use(less)\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","\n\n\n\n\nmodule.exports = {\n  0: [0xF0, 0x90, 0x90, 0x90, 0xF0],\n  1: [0x20, 0x60, 0x20, 0x20, 0x70],\n  2: [0xF0, 0x10, 0xF0, 0x80, 0xF0],\n  3: [0xF0, 0x10, 0xF0, 0x10, 0xF0],\n  4: [0x90, 0x90, 0xF0, 0x10, 0xF0],\n  5: [0xF0, 0x80, 0xF0, 0x10, 0xF0],\n  6: [0xF0, 0x80, 0xF0, 0x90, 0xF0],\n  7: [0xF0, 0x10, 0x20, 0x40, 0x40],\n  8: [0xF0, 0x90, 0xF0, 0x90, 0xF0],\n  9: [0xF0, 0x90, 0xF0, 0x10, 0xF0],\n  10:[0xF0, 0x90, 0xF0, 0x90, 0x90],\n  11:[0xE0, 0x90, 0xE0, 0x90, 0xE0],\n  12:[0xF0, 0x80, 0x80, 0x80, 0xF0],\n  13:[0xE0, 0x90, 0x90, 0x90, 0xE0],\n  14:[0xF0, 0x80, 0xF0, 0x80, 0xF0],\n  15:[0xF0, 0x80, 0xF0, 0x80, 0x80],\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Modules/hexData.js","function concatTypedArray(array1, array2){\n  // console.log(array1, array2)\n  let result = new Uint8Array(array1.length + array2.length)\n  result.set(array1, 0)\n  result.set(array2, array1.length)\n  return result\n}\n\n// loadROM is a callback (event handler) and calls callback(program)\nconst fileLoader = {\n  loadROM: function(e, callback = null){\n    let base = './static/'\n    let file\n    if (e.target === undefined){\n      file = base + e\n    } else {\n      file = base + e.target.value\n    }\n    console.log(file)\n    var myInit = { method: 'GET',\n                   headers: {\n                       'Content-Type': 'application/octet-stream'\n                   },\n                   mode: 'cors',\n                   cache: 'default' };\n    var myRequest = new Request(file, myInit);\n    let reader\n    let program = []\n    fetch(myRequest)\n      .then((res) => {\n        console.log(res.body)\n        reader = res.body.getReader()\n        return reader.read()\n      })\n      .then(function processText({done, value}){\n\n        if (done){\n          console.log('read complete')\n          console.log(program)\n          return callback(program)\n        }\n\n        program = concatTypedArray(program, value)\n\n        return reader.read().then(processText)\n\n      })\n      .catch(console.log.bind(console))\n  },\n}\n\nmodule.exports = fileLoader\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Modules/fileLoader.js","\nfunction isHexString(string){\n  if (!string.match(/^([0-9a-fA-F])+$/g)){\n    return false\n  } else {\n    return true\n  }\n}\n\nfunction isChip8Register(string){\n  if (!string.match(/^([Vv][0-9a-fA-F])$/g)){\n    return false\n  } else {\n    return true\n  }\n}\n\nfunction tokenToOp(tokens){\n  let byteCode //a string\n\n  let instr = tokens[0]\n  switch(instr.toUpperCase()){\n    case 'SYS':\n      if (tokens.length === 2\n        && isHexString(tokens[1])){\n        let addr = tokens[1].slice(0, 3)\n        byteCode = '0x0' + addr\n      }\n      break\n    case 'CLS':\n      if (tokens.length === 1){\n        byteCode = '0x00E0'\n      }\n      break\n    case 'RET':\n      if (tokens.length === 1){\n        byteCode = '0x00EE'\n      }\n      break\n    case 'JP':\n      if (tokens.length === 2 && isHexString(tokens[1])){\n        let addr = tokens[1].slice(0, 3)\n        byteCode = '0x1' + addr\n      }\n      break\n\n    case 'CALL':\n      if (tokens.length === 2\n        && isHexString(tokens[1])){\n        let addr = tokens[1].slice(0, 3)\n        byteCode = '0x2' + addr\n      }\n      break\n\n    case 'SE':\n      if (tokens.length === 3\n        && isChip8Register(tokens[1])){\n        if (isHexString(tokens[2])) {\n          let reg = tokens[1].charAt(1)\n          let imm = tokens[2].slice(0, 2)\n          byteCode = '0x3' + reg + imm\n        }\n        else if (isChip8Register(tokens[2])){\n          let reg1 = tokens[1].charAt(1)\n          let reg2 = tokens[2].charAt(1)\n          byteCode = '0x5' + reg1 + reg2 + '0'\n        }\n      }\n      break\n\n    case 'SNE':\n      if (tokens.length === 3\n        && isChip8Register(tokens[1])\n        && isHexString(tokens[2])){\n        let reg = tokens[1].charAt(1)\n        let imm = tokens[2].slice(0, 2)\n        byteCode = '0x4' + reg + imm\n      }\n      break\n\n    case 'LD':\n      if (tokens.length === 3\n        && isChip8Register(tokens[1])){\n        if (isHexString(tokens[2])) {\n          let reg = tokens[1].charAt(1)\n          let imm = tokens[2].slice(0, 2)\n          byteCode = '0x6' + reg + imm\n        }\n        else if (isChip8Register(tokens[2])){\n          let reg1 = tokens[1].charAt(1)\n          let reg2 = tokens[2].charAt(1)\n          byteCode = '0x8' + reg1 + reg2 + '0'\n        }\n      }\n      break\n\n    case 'ADD':\n      if (tokens.length === 3\n        && isChip8Register(tokens[1])){\n        if (isHexString(tokens[2])) {\n          let reg = tokens[1].charAt(1)\n          let imm = tokens[2].slice(0, 2)\n          byteCode = '0x7' + reg + imm\n        }\n        else if (isChip8Register(tokens[2])){\n          let reg1 = tokens[1].charAt(1)\n          let reg2 = tokens[2].charAt(1)\n          byteCode = '0x8' + reg1 + reg2 + '4'\n        }\n      }\n      break\n\n    case 'SUB':\n      if (tokens.length === 3\n        && isChip8Register(tokens[1])){\n        if (isHexString(tokens[2])) {\n          let reg = tokens[1].charAt(1)\n          let imm = tokens[2].slice(0, 2)\n          byteCode = '0x7' + reg + imm\n        }\n        else if (isChip8Register(tokens[2])){\n          let reg1 = tokens[1].charAt(1)\n          let reg2 = tokens[2].charAt(1)\n          byteCode = '0x8' + reg1 + reg2 + '4'\n        }\n      }\n      break\n\n    case 'OR':\n      if (tokens.length === 3\n        && isChip8Register(tokens[1])\n        && isChip8Register(tokens[2])){\n        let reg = tokens[1].charAt(1)\n        let reg2 = tokens[2].charAt(1)\n        byteCode = '0x8' + reg + reg2 + '1'\n      }\n      break\n\n    case 'AND':\n      if (tokens.length === 3\n        && isChip8Register(tokens[1])\n        && isChip8Register(tokens[2])){\n        let reg = tokens[1].charAt(1)\n        let reg2 = tokens[2].charAt(1)\n        byteCode = '0x8' + reg + reg2 + '2'\n      }\n      break\n\n    case 'XOR':\n      if (tokens.length === 3\n        && isChip8Register(tokens[1])\n        && isChip8Register(tokens[2])){\n        let reg = tokens[1].charAt(1)\n        let reg2 = tokens[2].charAt(1)\n        byteCode = '0x8' + reg + reg2 + '3'\n      }\n      break\n\n\n\n\n    default:\n      break\n  }\n\n  return byteCode\n}\n\n\n// opcodeDecoder.parse('ADD V0 13') -> 7013\nconst opcodeDecoder = {\n  parse: function(val){\n    let clean = val.replace(/\\n|/i, '').replace(/\\t|/i, '').replace(/,/,' ')\n    let tokens = clean.replace(/\\s+/, ' ').trim().split(' ')\n    // tokens = ['ADD', 'V0', '13']\n    return tokenToOp(tokens)\n  },\n\n}\n\n\nmodule.exports = opcodeDecoder\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/Modules/opcodeDecoder.js"],"sourceRoot":""}